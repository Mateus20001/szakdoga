<mat-card class="exam-card">
  <h2>Create New Exam</h2>

  <form [formGroup]="examForm" (ngSubmit)="onSubmit()" class="exam-form">

    <mat-form-field appearance="outline">
      <mat-label>Exam Date & Time</mat-label>
      <input matInput type="datetime-local" formControlName="examDate" required>
      <mat-error *ngIf="examForm.get('examDate')?.hasError('required')">Exam date is required</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Location</mat-label>
      <mat-select formControlName="location" required>
        <mat-option *ngFor="let loc of locations" [value]="loc">{{ loc }}</mat-option>
      </mat-select>
      <mat-error *ngIf="examForm.get('location')?.hasError('required')">Location is required</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Longevity (minutes)</mat-label>
      <input matInput type="number" formControlName="longevity" required>
      <mat-error *ngIf="examForm.get('longevity')?.hasError('required')">Required</mat-error>
      <mat-error *ngIf="examForm.get('longevity')?.hasError('min')">Must be > 0</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Exam Type</mat-label>
      <mat-select formControlName="type" required>
        <mat-option *ngFor="let t of types" [value]="t">{{ t }}</mat-option>
      </mat-select>
      <mat-error *ngIf="examForm.get('type')?.hasError('required')">Type is required</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Course Date ID</mat-label>
      <input matInput type="number" formControlName="courseDateId" required>
      <mat-error *ngIf="examForm.get('courseDateId')?.hasError('required')">Course Date ID is required</mat-error>
    </mat-form-field>

    <button
      mat-raised-button
      color="primary"
      type="submit"
      [disabled]="isSubmitting || examForm.invalid">
      {{ isSubmitting ? 'Submitting...' : 'Create Exam' }}
    </button>
  </form>

  <p class="success" *ngIf="successMessage">{{ successMessage }}</p>
  <p class="error" *ngIf="errorMessage">{{ errorMessage }}</p>
</mat-card>
